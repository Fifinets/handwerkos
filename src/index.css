/* Leaflet CSS */
@import 'leaflet/dist/leaflet.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile Safe Area Support */
@layer base {
  /* Support for mobile safe areas (notch, status bar, etc.) */
  html, body {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height */
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }
  
  #root {
    height: 100vh;
    height: 100dvh;
    overflow-x: hidden;
  }
  
  /* Mobile viewport fixes */
  body {
    touch-action: pan-x pan-y;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  /* Prevent zoom on input focus */
  input, textarea, select {
    font-size: 16px !important;
  }
}

/* Custom Tailwind utilities for safe areas */
@layer utilities {
  .px-safe {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  .py-safe {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }
  
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .h-screen-safe {
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
  
  .min-h-screen-safe {
    min-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
}

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 10%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 10%;

    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;

    --secondary: 210 40% 96%;
    --secondary-foreground: 0 0% 10%;

    --muted: 210 40% 96%;
    --muted-foreground: 0 0% 40%;

    --accent: 210 40% 96%;
    --accent-foreground: 0 0% 10%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 217 91% 60%;

    --radius: 14px;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 0 0% 10%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 210 40% 96%;
    --sidebar-accent-foreground: 0 0% 10%;
    --sidebar-border: 214 32% 91%;
    --sidebar-ring: 217 91% 60%;
  }

  .dark {
    /* Modern dark background with subtle blue tint */
    --background: 222 47% 4%;
    --foreground: 213 31% 91%;

    /* Cards with elevated feel */
    --card: 222 47% 5%;
    --card-foreground: 213 31% 91%;

    /* Popovers with better contrast */
    --popover: 222 47% 6%;
    --popover-foreground: 213 31% 91%;

    /* Modern blue primary for dark theme */
    --primary: 214 78% 60%;
    --primary-foreground: 222 47% 4%;

    /* Subtle secondary colors */
    --secondary: 217 19% 12%;
    --secondary-foreground: 213 31% 91%;

    /* Muted elements with better hierarchy */
    --muted: 217 19% 12%;
    --muted-foreground: 215 15% 60%;

    /* Accent color for interactive elements */
    --accent: 217 19% 14%;
    --accent-foreground: 213 31% 91%;

    /* Destructive with appropriate contrast */
    --destructive: 0 75% 60%;
    --destructive-foreground: 210 40% 98%;

    /* Borders and inputs with subtle definition */
    --border: 217 19% 12%;
    --input: 217 19% 14%;
    --ring: 214 78% 60%;

    /* Sidebar with distinct dark theme */
    --sidebar-background: 222 47% 3%;
    --sidebar-foreground: 213 31% 80%;
    --sidebar-primary: 214 78% 60%;
    --sidebar-primary-foreground: 222 47% 4%;
    --sidebar-accent: 217 19% 8%;
    --sidebar-accent-foreground: 213 31% 91%;
    --sidebar-border: 217 19% 8%;
    --sidebar-ring: 214 78% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    margin: 0;
    padding: 0;
  }
  
  html {
    margin: 0;
    padding: 0;
  }
  
  #root {
    margin: 0;
    padding: 0;
  }
  
  /* Force light theme styles */
  .dark {
    display: none !important;
  }
}

/* Mobile app specific styles */
@media (max-width: 768px) {
  html, body {
    height: 100vh;
    overflow: hidden;
    overscroll-behavior: none;
    margin: 0;
    padding: 0;
  }
  
  #root {
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    margin: 0;
    padding: 0;
    /* Use full screen including status bar area */
    position: fixed;
    top: 0;
    left: 0;
  }
  
  .mobile-container {
    height: 100vh;
    width: 100vw;
  }
}

/* Mobile Design System - Blue Theme */
@layer components {
  /* Modern blue gradients and shadows */
  .gradient-blue { @apply bg-gradient-to-br from-primary to-blue-500; }
  .gradient-subtle { @apply bg-gradient-to-b from-background to-muted/30; }
  .shadow-blue { box-shadow: 0 10px 30px rgba(59, 130, 246, 0.15); }
  .shadow-soft { box-shadow: 0 10px 30px rgba(2,6,23,.06); }
  .shadow-softer { box-shadow: 0 6px 18px rgba(2,6,23,.05); }
  
  /* Mobile-optimized components */
  .mobile-card { 
    @apply bg-white rounded-2xl shadow-soft p-6 border-0;
  }
  
  .mobile-fab {
    @apply fixed bottom-20 right-4 w-14 h-14 bg-primary text-white rounded-full shadow-blue 
           flex items-center justify-center z-50 transition-all hover:scale-105 active:scale-95;
  }
  
  .mobile-tab {
    @apply flex-1 flex flex-col items-center justify-center py-2 px-3 text-xs font-medium
           transition-all duration-200 min-h-[64px];
  }
  
  .mobile-tab.active {
    @apply text-primary bg-primary/5;
  }
  
  .mobile-tab.inactive {
    @apply text-muted-foreground hover:text-foreground;
  }
  
  .mobile-touch-target {
    @apply min-h-[44px] min-w-[44px] flex items-center justify-center;
  }
  
  .mobile-status-dot {
    @apply w-3 h-3 rounded-full;
  }
  
  .mobile-status-active { @apply bg-green-500; }
  .mobile-status-break { @apply bg-yellow-500; }
  .mobile-status-drive { @apply bg-blue-500; }
  .mobile-status-inactive { @apply bg-gray-300; }
  
  /* Typography improvements */
  .mobile-headline { @apply text-xl font-bold text-foreground; }
  .mobile-subheadline { @apply text-base font-semibold text-foreground; }
  .mobile-body { @apply text-sm text-muted-foreground; }
  .mobile-caption { @apply text-xs text-muted-foreground; }
  
  /* Button variants for mobile */
  .btn-mobile-primary {
    @apply h-12 rounded-2xl bg-primary text-white font-semibold text-base
           shadow-blue hover:bg-primary/90 active:scale-95 transition-all;
  }
  
  .btn-mobile-secondary {
    @apply h-12 rounded-2xl bg-secondary text-secondary-foreground font-semibold text-base
           hover:bg-secondary/80 active:scale-95 transition-all;
  }
  
  .btn-mobile-outline {
    @apply h-12 rounded-2xl border-2 border-primary bg-transparent text-primary font-semibold text-base
           hover:bg-primary/5 active:scale-95 transition-all;
  }
}

/* Legacy styles */
.badge-pill { @apply inline-flex items-center rounded-full border px-2.5 py-1 text-xs; }
.kpi-card  { @apply bg-card border rounded-lg px-4 py-3 flex items-center justify-between; }